<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
</head>

<body>
    <script>
        //event loop (事件循环) http://www.ruanyifeng.com/blog/2013/10/event_loop.html
        // 
        //浏览器的event loop
        // console.log(1);
        // setTimeout(() => {
        //     console.log(2);
        // });
        // Promise.resolve().then((re) => {
        //     console.log(3);
        // });
        // console.log(4);
        // 1 4 3 2
        //因为event loop 有宏任务和微任务  首先执行script宏任务，然后执行完所有微任务才会在执行宏任务
        //宏任务(Task) script setTime out setInterval setImmediate I/O UI rendering
        //微任务(microtask) Promise Object.observe(监听对象变化) mutationObserve(一个类，监听DOM结构变化) postMessage(window对象之间用来通信)
        //   window.addEventListener("message", (event) => {
        //     const data = event.data;
        //     if (data.type) {
        //       switch (data.type) {
        //         case "on-route":
        //           this.$router.push({
        //             name: data.payload.name,
        //             query: data.query,
        //           });
        //           break;
        //         case "flowSubmit":
        //           util.bus.$emit("flowSubmit", data.data);
        //           break;
        //       }
        //     }
        //   });
        //   window.parent.postMessage(
        //     {
        //       type: "on-flow",
        //       data: {
        //         success: true,
        //       },
        //     },
        //     "*"
        //   );

        //代码示例
        //new Promise()里面的代码是一个参数，是同步执行的
        //then 后面的代码才是异步执行
        // console.log("start");
        // setTimeout(() => {
        //     console.log("setTimeout");
        //     new Promise((resolve) => {
        //         console.log("promiseInner1");
        //         resolve();
        //     }).then(() => {
        //         console.log("promiseThen1");
        //     });
        // }, 0);
        // new Promise((resolve) => {
        //     console.log("promiseInner2");
        //     resolve();
        // }).then(() => {
        //     console.log("promiseThen2");
        // });
        // start promiseInner2 promiseThen2 setTimeout  promiseInner1 promiseThen1

        // async function async1() {
        //     console.log("asyncStart1");
        //     await async2();
        //     console.log("asyncEnd1");
        // }
        // async function async2() {
        //     return Promise.resolve().then((res) => {
        //         console.log("asyncPromise2");
        //     });
        // }
        // console.log("start");
        // setTimeout(() => {
        //     console.log("setTimeout");
        // }, 0);
        // async1();
        // new Promise((resolve) => {
        //     console.log("promise1");
        //     resolve();
        // }).then(() => {
        //     console.log("promise2");
        // });
        //  start asyncStart1  promise1 asyncPromise2 promise2 asyncEnd1 setTimeout

        // console.log("start");
        // setTimeout(() => {
        //     console.log("setTimeout1");
        // });
        // new Promise((resolve) => {
        //     console.log("Promise1");
        //     resolve();
        // }).then(() => {
        //     console.log("then1");
        //     new Promise((resolve) => {
        //         resolve();
        //     }).then(() => {
        //         console.log("then2");
        //     });
        //     setTimeout(() => {
        //         console.log("setTimeout2");
        //     });
        // });
        // start Promise1 then1 then2 setTimeout1 setTimeout2
        //node.js 的event loop
    </script>
</body>

</html>